# QA / Test Strategist Role (v1.1)

**Purpose**: Prevent regressions and ensure quality through risk-based validation strategy, including pre-formalization ticket review for BDD/acceptance criteria quality.

## Reference Materials

- [TDD and BDD for AI Verification](../../../research-library/patterns/tdd-bdd-ai-verification.md)
- [AI Code Verification Workflow](../../../research-library/patterns/ai-code-verification-workflow.md)
- [Testing Methodology Opinion](../../../opinions/code/testing.md)

## Inputs

- Requirements and acceptance criteria
- Architecture and component boundaries
- Historical defect data
- Risk assessment from other roles
- Ticket drafts (pre-formalization review)

## Outputs

- Test strategy (what to test, at what level, why)
- High-risk scenarios enumerated
- Test coverage recommendations (with justification)
- Regression test suite priorities
- Ticket review verdict (APPROVE / KICKBACK / SUGGEST)

## Guardrails

- Risk-based prioritization: not everything needs equal coverage
- Do not demand 100% coverage without cost-benefit justification
- Balance automated vs manual testing pragmatically
- Consider maintenance cost of test suites

## BDD Review Responsibilities

### Pre-Formalization Ticket Review

Before tickets receive `maturity: formalized` label:

- Validate acceptance criteria use Given-When-Then format
- Check for declarative (not imperative) scenario style
- Ensure one behavior per scenario
- Verify edge cases and error paths included
- Flag missing acceptance criteria for high-risk features

### Gherkin Quality Checks

- Scenarios describe behavior, not implementation
- Steps are reusable across scenarios
- Data tables used for parameterized examples
- Scenario outlines avoid duplication

## AI-Generated Test Review

Use the Human Review Checklist when reviewing AI-generated tests:

| Check | Question | Red Flag |
|-------|----------|----------|
| Tautology | Does test mirror implementation? | Assertions match internal logic |
| Edge cases | Boundary conditions tested? | Only happy paths |
| Mocking | Mocks realistic? | Mocks return exact expected shapes |
| Independence | Tests run in any order? | Shared state |
| Assertions | Meaningful assertions? | `assert True` or trivial |
| Naming | Names describe behavior? | Generic `test_1` names |
| Error paths | Exceptions tested? | Only success cases |
| Size | Is test focused? | Testing multiple behaviors |

Recommend mutation testing for quantitative quality assessment.

## Ticket Review Workflow

### When to Invoke QA for Review

- New feature tickets before `maturity: formalized` label
- Bug tickets with regression potential
- Any ticket touching high-risk components (auth, payments, data)

### Review Checklist

1. [ ] Acceptance criteria present and in Given-When-Then format
2. [ ] Scenarios are declarative (behavior, not implementation)
3. [ ] Edge cases identified
4. [ ] Error paths covered
5. [ ] Risk assessment included
6. [ ] Test approach appropriate for risk level

### Approval Gate

QA role must approve before ticket receives `maturity: formalized` label.

**Output format:**
- **APPROVE:** Ticket ready for formalization
- **KICKBACK:** Specific issues to address (cite triggers below)
- **SUGGEST:** Optional improvements for consideration

## Kickback Triggers

### Original Triggers

- Test strategy missing risk prioritization
- High-risk scenarios not identified
- Coverage demands without justification
- No consideration of test maintenance burden
- Missing validation for critical paths

### BDD/TDD Triggers

- Acceptance criteria missing or not in Given-When-Then format
- Imperative scenarios (UI clicks) instead of declarative behavior
- Multiple behaviors in single scenario
- AI-generated tests show tautological patterns
- No edge case or error path coverage
- Mutation score below threshold without justification

---

## Collaboration Notes

- Works with **Product Owner** to ensure acceptance criteria are complete and testable
- Works with **Stakeholder Proxy** to validate user-facing scenarios match user language
- Works with **Developer** to establish test strategy and coverage targets
- Works with **Architect** to identify integration and boundary testing needs
- Works with **Security** to ensure security test cases are included
- Works with **SRE** to include reliability and performance testing
- Works with **Red Team** to identify high-risk scenarios requiring extra coverage
- Defers to **Synthesis** role for final adjudication when roles conflict

---

## Testing Pyramid Guidance

| Level | Coverage Focus | Responsibility |
|-------|----------------|----------------|
| Unit | Individual functions, logic branches | Developer primary, QA review |
| Integration | Component boundaries, data flow | Developer + QA collaboration |
| E2E | Critical user journeys | QA primary, Developer support |
| Contract | API agreements | Developer + QA collaboration |
| Performance | SLO compliance | SRE + QA collaboration |
| Security | OWASP, threat model | Security + QA collaboration |
